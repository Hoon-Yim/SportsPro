@model Customer
@{
    ViewData["Title"] = "Edit Customer";

    var countries = ViewBag.Countries;

    string Duplication()
    {
        return (ViewBag.emailDuplicated) ? "input-validation-error" : "";
    }
}

<section id="edit">
    <div id="edit-page">
        <div class="edit-title">
            <h1>@ViewBag.Action Customer</h1>
            <h6>To save the information of Customer, Click [ Save ]</h6>
        </div>
        <div class="edit-form">
            <form asp-action="Edit" method="POST">

                <div class="edit-input">
                    <label asp-for="FirstName">First Name</label>
                    <input asp-for="FirstName" type="text" value="@Model.FirstName"><br>
                </div>

                <div class="edit-alert">
					@Html.ValidationMessage("FirstName")
                </div>

                <div class="edit-input">
                    <label asp-for="LastName">Last Name</label>
                    <input asp-for="LastName" type="text" value="@Model.LastName"><br>
                </div>

                <div class="edit-alert">
					@Html.ValidationMessage("LastName")
                </div>

                <div class="edit-input">
                    <label asp-for="Address">Address</label>
                    <input asp-for="Address" type="text" value="@Model.Address"><br>
                </div>

                <div class="edit-alert">
					@Html.ValidationMessage("Address")
                </div>

                <div class="edit-input">
                    <label asp-for="City">City</label>
                    <input asp-for="City" type="text" value="@Model.City"><br>
                </div>

                <div class="edit-alert">
					@Html.ValidationMessage("City")
                </div>

                <div class="edit-input">
                    <label asp-for="Province">Province</label>
                    <input asp-for="Province" type="text" value="@Model.Province"><br>
                </div>

                <div class="edit-alert">
					@Html.ValidationMessage("Province")
                </div>

                <div class="edit-input">
                    <label asp-for="PostalCode">Postal Code</label>
                    <input asp-for="PostalCode" type="text" value="@Model.PostalCode"><br>
                </div>

                <div class="edit-alert">
					@Html.ValidationMessage("PostalCode")
                </div>

                <div class="edit-input">
                    <label asp-for="CountryId">Country</label>
                    <select asp-for="CountryId">
                    <option value="">Select a country..</option>
                        @foreach (var country in countries)
                        {
                            if (Model.CountryId == country.CountryId)
                            {
						        <option value="@country.CountryId" selected>@country.Name</option>
                            }
                            else
                            {
						        <option value="@country.CountryId">@country.Name</option>
                            }
                        }
                    </select><br>
                </div>

                <div class="edit-alert">
					@Html.ValidationMessage("CountryId")
                </div>

                <div class="edit-input">
                    <label asp-for="Email">Email</label>
                    <input asp-for="Email" type="text" value="@Model.Email" class="@Duplication()" placeholder="username@email.com"><br>
                </div>

				<div class="edit-alert">
					@Html.ValidationMessage("Email")
					@if (ViewBag.emailDuplicated)
					{
						@Html.ValidationMessageFor(m => m.Email, "Email is already in use" )
					}
				</div>

                <div class="edit-input">
                    <label asp-for="Phone">Phone</label>
                    <input asp-for="Phone" type="text" value="@Model.Phone" placeholder="(111) 111-1111" /><br>
                </div>

				<div class="edit-alert">
					@Html.ValidationMessage("Phone")
				</div>

                <input type="hidden" asp-for="CustomerId" />

                <div class="edit-btn">
                    <button class="edit-save" type="submit">Save</button>
                    <a asp-action="List">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</section>
